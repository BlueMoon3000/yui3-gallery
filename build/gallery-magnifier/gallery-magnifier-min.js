YUI.add("gallery-magnifier",function(F){var B=function(H){this._image={};B.superclass.constructor.apply(this,arguments);},D="Magnifier",C="magnifier",E=F.ClassNameManager.getClassName(C,"display"),G=F.ClassNameManager.getClassName(C,"hidden"),A="<div><img /></div>";B.NAME=D;B.NS=D;B.ATTRS={host:{validator:function(H){if(!H.test("img")){F.fail(D+" can't be attached to this node.");return false;}return true;}},follow:{value:false,validator:F.Lang.isBoolean},display:{writeOnce:true,setter:function(H){H=F.one(H);return H;}},height:{value:100,validator:F.Lang.isNumber},width:{value:100,validator:F.Lang.isNumber},zoom:{value:2,validator:F.Lang.isNumber},staticX:{validator:F.Lang.isNumber},staticY:{validator:F.Lang.isNumber}};F.extend(B,F.Plugin.Base,{initializer:function(){var H=this.get("host");this._image.width=parseInt(H.getStyle("width"),10);this._image.height=parseInt(H.getStyle("height"),10);this._renderDisplay();this.bindEvents();},bindEvents:function(){var H=this.get("host"),I=this.get("display");H.on("mouseover",function(){I.removeClass(G);},this);H.on("mouseout",function(){I.addClass(G);},this);H.on("mousemove",this._moveViewport,this);},_renderDisplay:function(){var K=this.get("display"),H=this.get("height"),J=this.get("width"),I;if(!F.Lang.isValue(K)){K=F.Node.create("<div></div>");this.set("display",K);this.get("host").get("parentNode").append(K);}K.setContent(A);I=K.one("img");if(F.Lang.isValue(H)){K.setStyle("height",H);}if(F.Lang.isValue(J)){K.setStyle("width",J);}if(!this.get("follow")){K.setStyles({top:this.get("staticY"),left:this.get("staticX")});}else{K.setStyles({top:0,left:0});}K.setStyle("position","absolute");K.addClass(E);this._configureImage();K.addClass(G);},_configureImage:function(){var J=this.get("zoom"),L=this.get("display"),K=this.get("host"),I=L.one("img"),H=this.get("follow");I.set("src",K.get("src"));I.setStyles({height:this._image.height*J,width:this._image.width*J});if(H){I.setXY(K.getXY());}else{I.setStyles({top:this.get("staticY"),left:this.get("staticX")});}},_moveViewport:function(I){var P=this.get("zoom"),J=this.get("display"),L=J.one("div"),N=this.get("host"),M=I.pageX-N.getX(),K=I.pageY-N.getY(),H=-M*P+this.get("height")/2,O=-K*P+this.get("width")/2;if(this.get("follow")){J.setStyles({top:I.pageY,left:I.pageX});}L.setXY([H,O]);}});F.Magnifier=B;},"@VERSION@",{requires:["plugin","node","classnamemanager"]});