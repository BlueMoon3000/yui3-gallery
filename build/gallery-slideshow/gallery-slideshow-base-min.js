YUI.add("gallery-slideshow-base",function(h){var f=function(){this._imageList=[];f.superclass.constructor.apply(this,arguments);},e="zIndex",a="SlideShow",d="slideshow",c=h.Lang.isNumber,b=h.ClassNameManager.getClassName,g={header:b(d,"header"),body:b(d,"body"),footer:b(d,"footer")};f.NAME=a;f.NS=a;f.HTML_PARSER={title:function(i){var j=i.one("."+g.header);return j?j.get("innerHTML"):"";},image_height:function(i){var j=i.one("."+g.body);return j?parseInt(j.getStyle("height"),10):null;},image_width:function(i){var j=i.one("."+g.body);return j?parseInt(j.getStyle("width"),10):null;},bodyNode:"ul."+g.body,headerNode:"div."+g.header,footerNode:"div."+g.footer,images:function(i){i.all("."+g.body+" li").each(function(l,k){var j={};this._parseImage(l,j);j._node.setStyle(e,-1*k);this._imageList.push(j);},this);}};f.ATTRS={delay:{value:5000,validator:c},animation:{validator:h.Lang.isObject,setter:function(i){if(!(i instanceof h.Anim)){i=new h.Anim(i);}i.on("end",function(){this.endTransition();},this);return i;}},image_height:{validator:c,setter:function(i){if(this.get("rendered")){this.get("bodyNode").setStyle("height",i);}return i;}},image_width:{validator:c,setter:function(i){if(this.get("rendered")){this.get("bodyNode").setStyle("width",i);}return i;}},title:{value:"",validator:h.Lang.isString,setter:function(i){if(this.get("rendered")){this._setHeaderContents(i);}return i;}},images:{lazyAdd:false,validator:h.Lang.isArray,getter:function(){return this._imageList;},setter:function(i){this.clearImages();this.addImages(i);}},bodyNode:{writeOnce:true},headerNode:{writeOnce:true},footerNode:{writeOnce:true}};h.extend(f,h.Widget,{TEMPLATES:{header:"<div class='"+g.header+"'></div>",body:"<ul class='"+g.body+"'></ul>",footer:"<div class='"+g.footer+"'></div>"},_renderImages:function(){var j=1,i=this.get("bodyNode");i.all("li").each(function(k){var l=+k.getStyle(e)||2;j=j>l?l:j;});h.Array.each(this._imageList,function(l,k){j-=1;if(!h.Lang.isValue(l._node)){this._createImage(l,j);}else{l._node.setStyle(e,j);}if(k===0){this.currentImage=l._node;}},this);},_createImage:function(j,k){var i=this.get("bodyNode"),m=h.Node.create("<li><img /></li>"),l=m.one("img");l.set("src",j.src);m.setStyle(e,k);j._node=m;i.insert(m);h.later(1000,this,function(o,n){o.setXY(n.getXY());},[m,i]);return m;},_setHeaderContents:function(j){var i=this.get("headerNode");if(!h.Lang.isValue(i)){i=this._addTemplate(this.TEMPLATES.header,0);this.set("headerNode",i);}i.set("innerHTML",j);},_addTemplate:function(j,i){var k=h.Node.create(j);this.get("contentBox").insert(k,i);return k;},_parseImage:function(j,i){i._node=j;i.src=j.one("img").get("src");},clearImages:function(){if(this.get("rendered")){this._destroyImagesUI();}this._imageList=[];},addImages:function(i){if(h.Lang.isArray(i)){h.Array.each(i,function(j){this._imageList.push(j);},this);}else{this._imageList.push(i);}if(this.get("rendered")){this._renderImages();}},_destroyImagesUI:function(){this.get("bodyNode").all("li").remove();h.Array.each(this._imageList,function(i){delete i._node;});},renderUI:function(){var k=this.get("bodyNode"),l=this.get("title"),i=this.get("image_height"),j=this.get("image_width");if(l.length>0){this._setHeaderContents(l);}if(!h.Lang.isValue(k)){k=this._addTemplate(this.TEMPLATES.body);this.set("bodyNode",k);}if(j){k.setStyle("width",j);}if(i){k.setStyle("height",i);}this._renderImages();},bindUI:function(){h.later(this.get("delay"),this,"beginTransition");},beginTransition:function(){var i=this.get("animation");if(i){i.set("node",this.currentImage);i.run();}else{this.endTransition();}},endTransition:function(){var i=this.get("bodyNode").all("li"),j=this.get("animation");i.each(function(m,n,p){var o=+m.getStyle(e),k=-1*p.size();if(o===-1){this.currentImage=m;}m.setStyle(e,o===0?k+1:o+1);},this);i.setStyles(j.get("from"));h.later(this.get("delay"),this,"beginTransition");}});h.SlideShow=f;},"@VERSION@",{requires:["widget","substitute"],optional:["anim"]});