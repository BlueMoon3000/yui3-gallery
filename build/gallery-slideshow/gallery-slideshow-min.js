YUI.add("gallery-slideshow",function(G){var E=function(){this._imageList=[];E.superclass.constructor.apply(this,arguments);},A="SlideShow",D="slideshow",C=G.Lang.isNumber,B=G.ClassNameManager.getClassName,F={header:B(D,"header"),body:B(D,"body"),footer:B(D,"footer")};E.NAME=A;E.NS=A;E.HTML_PARSER={title:function(H){var I=H.one(F.header);return I?I.get("innerHTML"):"";},image_height:function(H){var I=H.one(F.body);return I?parseInt(I.getStyle("height"),10):null;},image_width:function(H){var I=H.one(F.body);return I?parseInt(I.getStyle("width"),10):null;},bodyNode:F.body,headerNode:F.header,footerNode:F.footer,images:function(H){H.all(F.body+" li").each(function(K,J){var I={};this._parseImage(K,I);I._node.setStyle("zIndex",-1*J);this._imageList.push(I);},this);}};E.ATTRS={delay:{value:5000,validator:C},animation:{validator:G.Lang.isObject,setter:function(H){if(!(H instanceof G.Anim)){H=new G.Anim(H);}H.on("end",function(){this.endTransition();},this);return H;}},image_height:{validator:C,setter:function(H){if(this.get("rendered")){this.get("bodyNode").setStyle("height",H);}return H;}},image_width:{validator:C,setter:function(H){if(this.get("rendered")){this.get("bodyNode").setStyle("width",H);}return H;}},title:{value:"",validator:G.Lang.isString,setter:function(H){if(this.get("rendered")){this._setHeaderContents(H);}return H;}},images:{lazyAdd:false,validator:G.Lang.isArray,getter:function(){return this._imageList;},setter:function(H){this.clearImages();this.addImages(H);}},bodyNode:{writeOnce:true},headerNode:{writeOnce:true},footerNode:{writeOnce:true}};G.extend(E,G.Widget,{TEMPLATES:{header:"<div class='"+F.header+"'></div>",body:"<ul class='"+F.body+"'></ul>",footer:"<div class='"+F.footer+"'></div>"},_renderImages:function(){G.Array.each(this._imageList,function(J,I){if(!G.Lang.isValue(J._node)){var H=this._createImage(J,-1*I);if(I===0){this.currentImage=H;}}},this);},_createImage:function(I,J){var H=this.get("bodyNode"),L=G.Node.create("<li><img /></li>"),K=L.one("img");K.set("src",I.src);L.setStyle("zIndex",J);I._node=L;H.insert(L);G.later(1000,this,function(N,M){N.setXY(M.getXY());},[L,H]);return L;},_setHeaderContents:function(I){var H=this.get("headerNode");if(!G.Lang.isValue(H)){H=this._addTemplate(this.TEMPLATES.header,0);this.set("headerNode",H);}H.set("innerHTML",I);},_addTemplate:function(I,H){var J=G.Node.create(I);this.get("contentBox").insert(J,H);return J;},_parseImage:function(I,H){H._node=I;H.src=I.one("img").get("src");},clearImages:function(){if(this.get("rendered")){this._destroyImagesUI();}this._imageList=[];},addImages:function(H){if(G.Lang.isArray(H)){G.Array.each(H,function(I){this._imageList.push(I);},this);}else{this._imageList.push(H);}if(this.get("rendered")){this._renderImages();}},_destroyImagesUI:function(){this.get("bodyNode").all("li").remove();G.Array.each(this._imageList,function(H){delete H._node;});},renderUI:function(){var J=this.get("bodyNode"),K=this.get("title"),H=this.get("image_height"),I=this.get("image_width");if(K.length>0){this._setHeaderContents(K);if(!G.Lang.isValue(J)){J=this._addTemplate(this.TEMPLATES.body);this.set("bodyNode",J);}}if(I){J.setStyle("width",I);}if(H){J.setStyle("height",H);}this._renderImages();},bindUI:function(){G.later(this.get("delay"),this,"beginTransition");},beginTransition:function(){var H=this.get("animation");if(H){H.set("node",this.currentImage);H.run();}else{this.endTransition();}},endTransition:function(){var H=this.get("bodyNode").all("li"),I=this.get("animation");H.each(function(K,L,N){var M=+K.getStyle("zIndex"),J=-1*N.size();if(M===-1){this.currentImage=K;}K.setStyle("zIndex",M===0?J+1:M+1);},this);H.setStyles(I.get("from"));G.later(this.get("delay"),this,"beginTransition");}});G.SlideShow=E;},"@VERSION@",{requires:["widget","substitute"],optional:["anim"]});