YUI.add("gallery-slideshow",function(B){var F=function(){this._imageList=[];F.superclass.constructor.apply(this,arguments);},J="zIndex",E="SlideShow",G="slideshow",A=B.Lang.isNumber,C=B.ClassNameManager.getClassName,I={header:C(G,"header"),body:C(G,"body"),footer:C(G,"footer")};F.NAME=E;F.NS=E;F.HTML_PARSER={title:function(K){var L=K.one("."+I.header);return L?L.get("innerHTML"):"";},image_height:function(K){var L=K.one("."+I.body);return L?parseInt(L.getStyle("height"),10):null;},image_width:function(K){var L=K.one("."+I.body);return L?parseInt(L.getStyle("width"),10):null;},bodyNode:"ul."+I.body,headerNode:"div."+I.header,footerNode:"div."+I.footer,images:function(K){K.all("."+I.body+" li").each(function(N,M){var L={};this._parseImage(N,L);L._node.setStyle(J,-1*M);this._imageList.push(L);},this);}};F.ATTRS={delay:{value:5000,validator:A},animation:{validator:B.Lang.isObject,setter:function(K){if(!(K instanceof B.Anim)){K=new B.Anim(K);}K.on("end",function(){this.endTransition();},this);return K;}},image_height:{validator:A,setter:function(K){if(this.get("rendered")){this.get("bodyNode").setStyle("height",K);}return K;}},image_width:{validator:A,setter:function(K){if(this.get("rendered")){this.get("bodyNode").setStyle("width",K);}return K;}},title:{value:"",validator:B.Lang.isString,setter:function(K){if(this.get("rendered")){this._setHeaderContents(K);}return K;}},images:{lazyAdd:false,validator:B.Lang.isArray,getter:function(){return this._imageList;},setter:function(K){this.clearImages();this.addImages(K);}},bodyNode:{writeOnce:true},headerNode:{writeOnce:true},footerNode:{writeOnce:true}};B.extend(F,B.Widget,{TEMPLATES:{header:"<div class='"+I.header+"'></div>",body:"<ul class='"+I.body+"'></ul>",footer:"<div class='"+I.footer+"'></div>"},_renderImages:function(){var L=1,K=this.get("bodyNode");K.all("li").each(function(M){var N=+M.getStyle(J)||2;L=L>N?N:L;});B.Array.each(this._imageList,function(N,M){L-=1;if(!B.Lang.isValue(N._node)){this._createImage(N,L);}else{N._node.setStyle(J,L);}if(M===0){this.currentImage=N._node;}},this);},_createImage:function(L,M){var K=this.get("bodyNode"),O=B.Node.create("<li><img /></li>"),N=O.one("img");N.set("src",L.src);O.setStyle(J,M);L._node=O;K.insert(O);B.later(1000,this,function(Q,P){Q.setXY(P.getXY());},[O,K]);return O;},_setHeaderContents:function(L){var K=this.get("headerNode");if(!B.Lang.isValue(K)){K=this._addTemplate(this.TEMPLATES.header,0);this.set("headerNode",K);}K.set("innerHTML",L);},_addTemplate:function(L,K){var M=B.Node.create(L);this.get("contentBox").insert(M,K);return M;},_parseImage:function(L,K){K._node=L;K.src=L.one("img").get("src");},clearImages:function(){if(this.get("rendered")){this._destroyImagesUI();}this._imageList=[];},addImages:function(K){if(B.Lang.isArray(K)){B.Array.each(K,function(L){this._imageList.push(L);},this);}else{this._imageList.push(K);}if(this.get("rendered")){this._renderImages();}},_destroyImagesUI:function(){this.get("bodyNode").all("li").remove();B.Array.each(this._imageList,function(K){delete K._node;});},renderUI:function(){var M=this.get("bodyNode"),N=this.get("title"),K=this.get("image_height"),L=this.get("image_width");if(N.length>0){this._setHeaderContents(N);}if(!B.Lang.isValue(M)){M=this._addTemplate(this.TEMPLATES.body);this.set("bodyNode",M);}if(L){M.setStyle("width",L);}if(K){M.setStyle("height",K);}this._renderImages();},bindUI:function(){B.later(this.get("delay"),this,"beginTransition");},beginTransition:function(){var K=this.get("animation");if(K){K.set("node",this.currentImage);K.run();}else{this.endTransition();}},endTransition:function(){var K=this.get("bodyNode").all("li"),L=this.get("animation");K.each(function(N,O,Q){var P=+N.getStyle(J),M=-1*Q.size();if(P===-1){this.currentImage=N;}N.setStyle(J,P===0?M+1:P+1);},this);K.setStyles(L.get("from"));B.later(this.get("delay"),this,"beginTransition");}});B.SlideShow=F;var H=function(K){this._ss=K.host;H.superclass.constructor.apply(this,arguments);};H.NS="padder";H.NAME="slideshowImagePadder";B.extend(H,B.Plugin.Base,{initializer:function(K){this.doAfter("_createImage",this._padImage);},_padImage:function(K){B.later(500,this,function(S,O){var M=parseInt(O.getStyle("height"),10),P=parseInt(O.getStyle("width"),10),R=parseInt(S.one("img").getStyle("height"),10),N=parseInt(S.one("img").getStyle("width"),10),Q=(P-N)/2,L=(M-R)/2;S.setStyle("padding",L+" "+Q);},[K._node,this._ss.get("bodyNode")]);}});B.SlideShow.ImagePadder=H;var D=function(K){this._ss=K.host;D.superclass.constructor.apply(this,arguments);};D.NS="scaling";D.NAME="slideshowImageScaler";D.ATTRS={height:{validator:B.Lang.isNumber},width:{validator:B.Lang.isNumber},scaleFactor:{validator:B.Lang.isNumber}};B.extend(D,B.Plugin.Base,{initializer:function(K){this.doAfter("_createImage",this._scaleImage);},_scaleImage:function(L){var N=this.get("scaleFactor"),M=L.width||this.get("width"),K=L.height||this.get("height"),O=L._node.one("img");if(N){O.setStyles({height:N+"%",width:N+"%"});}else{if(M){O.setStyle("width",M);}if(K){O.setStyle("height",K);}}}});B.SlideShow.ImageScaler=D;},"@VERSION@",{requires:["widget","substitute","plugin"],optional:["anim"]});